# --- Gemeinsame Defaults (beide Profile) ---
server:
  # lokal 8080, in Cloud Foundry/BT P via ${PORT}
  port: ${PORT:8080}

spring:
  main:
    banner-mode: "off"

# Actuator: nur Health & Info per HTTP exponieren
management:
  endpoints:
    web:
      exposure:
        include: health,info

# CAP Security: strikter Auth-Modus (Standard, hier explizit)
cds:
  security:
    authentication:
      mode: model-strict

# --- Lokales Dev-Profil (H2, Mock-User) ---
---
spring:
  config:
    activate:
      on-profile: default

  security:
    user:
      name: dev
      password: dev

  datasource:
    url: jdbc:h2:mem:hr;DB_CLOSE_DELAY=-1
    driver-class-name: org.h2.Driver
    username: sa
    password:

  h2:
    console:
      enabled: true
      path: /h2

  sql:
    init:
      mode: always 

logging:
  level:
    "[com.sap.cds]": INFO
    "[org.springframework.web]": INFO
    root: INFO

cds:
  security:
    mock:
      enabled: true
      defaultUsers:
        enabled: true        # l채sst authenticated / privileged / system zus채tzlich zu
      users:
        dev:                 # <-- Schl체ssel = Benutzername
          password: dev
          privileged: true   # hat alle Rechte (lokal praktisch)
          roles:
            - HRViewer
            - HREditor

# --- Cloud-Profil (BTP: HANA + XSUAA/IAS 체ber Service Bindings) ---
---
spring:
  config:
    activate:
      on-profile: cloud

# Keine explizite DataSource -> CAP nimmt HANA aus dem Service Binding

cds:
  security:
    mock:
      enabled: false
    authentication:
      # OData $metadata-Endpunkte absichern (Default ist true; hier explizit)
      authenticateMetadataEndpoints: true
