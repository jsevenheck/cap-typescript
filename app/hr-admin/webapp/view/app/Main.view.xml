<mvc:View
        controllerName="hr.admin.controller.app.Main"
        xmlns:mvc="sap.ui.core.mvc"
        displayBlock="true"
        xmlns="sap.m"
        xmlns:core="sap.ui.core"
        core:require="{ Device: 'sap/ui/Device' }">

    <App id="app">
        <pages>
            <Page id="mainPage" title="{i18n>clientManagement}">
                <content>
                    <VBox class="sapUiSmallMargin">

                        <Title text="{i18n>manageClients}" level="H2"/>
                        <Text text="{i18n>manageClientsDesc}"/>
                        <List
                                id="clientsList"
                                mode="SingleSelectMaster"
                                includeItemInSelection="true"
                                items="{path: '/Clients', parameters: {$expand: 'employees($count=true;$top=0)'}}"
                                growing="true" growingThreshold="20" growingScrollToLoad="true"
                                noDataText="{i18n>noClientsFound}"
                                selectionChange=".onSelectionChange"
                                itemPress=".onClientPress">
                            <headerToolbar>
                                <Toolbar>
                                    <Title text="{i18n>clients}" level="H3"/>
                                    <ToolbarSpacer/>
                                    <Button
                                            type="Emphasized"
                                            text="{i18n>add}"
                                            icon="sap-icon://add"
                                            visible="{auth>/canWrite}"
                                            press=".onAddClient"/>
                                    <Button
                                            text="{i18n>edit}"
                                            icon="sap-icon://edit"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedClientId}}"
                                            press=".onEditClient"/>
                                    <Button
                                            text="{i18n>delete}"
                                            icon="sap-icon://delete"
                                            type="Transparent"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedClientId}}"
                                            press=".onDeleteClient"/>
                                    <Button
                                            text="{i18n>refresh}"
                                            icon="sap-icon://refresh"
                                            press=".onRefresh"/>
                                </Toolbar>
                            </headerToolbar>
                            <items>
                                <StandardListItem
                                        title="{name}"
                                        description="{companyId}"
                                        info="{= ${employees@odata.count} !== undefined ? ${employees@odata.count} + ' ' + (${employees@odata.count} === 1 ? ${i18n>employee} : ${i18n>employees}) : '' }"
                                        infoState="Information"
                                        type="Active"/>
                            </items>
                        </List>
                    </VBox>
                </content>
            </Page>
            <Page
                    id="employeesPage"
                    title="{i18n>employees}"
                    showNavButton="true"
                    navButtonPress=".onBackToClients">
                <content>
                    <VBox class="sapUiSmallMargin">
                        <IconTabBar
                                id="employeesTabBar"
                                selectedKey="{view>/selectedTabKey}"
                                select=".onTabSelect"
                                expandable="false"
                                upperCase="false">
                            <items>
                                <IconTabFilter key="clients" text="{i18n>clients}" icon="sap-icon://customer"/>
                                <IconTabFilter key="employees" text="{i18n>employees}" icon="sap-icon://group"/>
                                <IconTabFilter
                                        key="costCenters"
                                        text="{i18n>costCenters}"
                                        icon="sap-icon://collections-management"
                                        enabled="{= !!${view>/selectedClientId}}"/>
                                <IconTabFilter
                                        key="locations"
                                        text="{i18n>locations}"
                                        icon="sap-icon://map"
                                        enabled="{= !!${view>/selectedClientId}}"/>
                            </items>
                        </IconTabBar>
                        <Title level="H2" text="{= ${name} ? ${i18n>employeesOf} + ' ' + ${name} : ${i18n>employees}}"/>
                        <Text
                                visible="{= !!${companyId}}"
                                text="{= ${companyId} ? ${i18n>companyId} + ': ' + ${companyId} : ''}"/>
                        <Text
                                text="{i18n>manageEmployeesDesc}"/>
                        <Panel
                                id="statisticsPanel"
                                headerText="{i18n>statisticsDashboard}"
                                expandable="true"
                                expanded="{view>/statisticsExpanded}"
                                class="sapUiSmallMarginTop sapUiSmallMarginBottom"
                                visible="{= !!${view>/selectedClientId}}"
                                busy="{view>/statisticsLoading}">
                            <content>
                                <HBox justifyContent="SpaceAround" wrap="Wrap" class="sapUiSmallMargin">
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/totalEmployees}"
                                                unit="{i18n>totalEmployees}"
                                                state="Information"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/activeEmployees}"
                                                unit="{i18n>activeEmployees}"
                                                state="Success"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/inactiveEmployees}"
                                                unit="{i18n>inactiveEmployees}"
                                                state="Warning"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/internalEmployees}"
                                                unit="{i18n>internalEmployees}"
                                                state="Information"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/externalEmployees}"
                                                unit="{i18n>externalEmployees}"
                                                state="Information"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/managersCount}"
                                                unit="{i18n>managersCount}"
                                                state="Information"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/recentHires}"
                                                unit="{i18n>recentHires}"
                                                state="Success"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{statistics>/upcomingExits}"
                                                unit="{i18n>upcomingExits}"
                                                state="Warning"/>
                                    </VBox>
                                </HBox>
                            </content>
                        </Panel>
                        <List
                                id="employeesList"
                                mode="SingleSelectMaster"
                                includeItemInSelection="true"
                                items="{path: 'employees'}"
                                growing="true" growingThreshold="20" growingScrollToLoad="true"
                                noDataText="{i18n>noEmployeesFound}"
                                selectionChange=".onEmployeesSelectionChange">
                            <headerToolbar>
                                <Toolbar>
                                    <Title text="{i18n>employees}" level="H3"/>
                                    <ToolbarSpacer/>
                                    <SearchField
                                            id="employeeSearchField"
                                            width="16rem"
                                            placeholder="{i18n>searchEmployees}"
                                            search=".onEmployeeSearch"
                                            liveChange=".onEmployeeSearchLiveChange"/>
                                    <Button
                                            text="{i18n>costCenters}"
                                            icon="sap-icon://collections-management"
                                            press=".onNavigateToCostCenters"/>
                                    <Button
                                            text="{i18n>locations}"
                                            icon="sap-icon://map"
                                            press=".onNavigateToLocations"/>
                                    <Button
                                            type="Emphasized"
                                            text="{i18n>add}"
                                            icon="sap-icon://add"
                                            visible="{auth>/canWrite}"
                                            press=".onAddEmployee"/>
                                    <Button
                                            text="{i18n>edit}"
                                            icon="sap-icon://edit"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedEmployeeId}}"
                                            press=".onEditEmployee"/>
                                    <Button
                                            text="{i18n>delete}"
                                            icon="sap-icon://delete"
                                            type="Transparent"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedEmployeeId}}"
                                            press=".onDeleteEmployee"/>
                                    <Button
                                            text="{i18n>exportCsv}"
                                            icon="sap-icon://download"
                                            type="Transparent"
                                            press=".onExportEmployees"/>
                                    <Button
                                            text="{i18n>anonymizeFormerEmployees}"
                                            icon="sap-icon://eraser"
                                            type="Transparent"
                                            visible="{auth>/canWrite}"
                                            press=".onOpenAnonymizeDialog"/>
                                    <Button
                                            text="{i18n>refresh}"
                                            icon="sap-icon://refresh"
                                            press=".onRefreshEmployees"/>
                                </Toolbar>
                            </headerToolbar>
                            <items>
                                <StandardListItem
                                        title="{= (${firstName} || '') + ' ' + (${lastName} || '') }"
                                        description="{= (${email} || '') + (${employmentType} ? ' • ' + (${employmentType} === 'external' ? ${i18n>external} : ${i18n>internal}) : '') }"
                                        info="{= ${status} === 'inactive' ? ${i18n>inactive} : ${i18n>active}}"
                                        infoState="{= ${status} === 'inactive' ? 'Warning' : 'Success'}"/>
                            </items>
                        </List>
                        <Panel
                                headerText="{i18n>assignments}"
                                expandable="false"
                                class="sapUiSmallMarginTop">
                            <List
                                    id="assignmentsList"
                                    mode="SingleSelectMaster"
                                    includeItemInSelection="true"
                                    items="{path: 'costCenterAssignments', parameters: { $expand: { costCenter: { $select: ['code','name'] } } } }"
                                    growing="true" growingThreshold="10" growingScrollToLoad="true"
                                    noDataText="{i18n>noAssignmentsFound}"
                                    selectionChange=".onAssignmentsSelectionChange">
                                <headerToolbar>
                                    <Toolbar>
                                        <Title text="{i18n>assignments}" level="H3"/>
                                        <ToolbarSpacer/>
                                        <Button
                                                type="Emphasized"
                                                text="{i18n>add}"
                                                icon="sap-icon://add"
                                                visible="{auth>/canWrite}"
                                                press=".onAddAssignment"/>
                                        <Button
                                                text="{i18n>edit}"
                                                icon="sap-icon://edit"
                                                visible="{auth>/canWrite}"
                                                enabled="{= !!${view>/selectedAssignmentId}}"
                                                press=".onEditAssignment"/>
                                        <Button
                                                text="{i18n>delete}"
                                                icon="sap-icon://delete"
                                                type="Transparent"
                                                visible="{auth>/canWrite}"
                                                enabled="{= !!${view>/selectedAssignmentId}}"
                                                press=".onDeleteAssignment"/>
                                        <Button
                                                text="{i18n>refresh}"
                                                icon="sap-icon://refresh"
                                                press=".onRefreshAssignments"/>
                                    </Toolbar>
                                </headerToolbar>
                                <items>
                                    <StandardListItem
                                            title="{= (${costCenter/code} || '') + ( ${costCenter/name} ? ' - ' + ${costCenter/name} : '' ) }"
                                            description="{= (${validFrom} || '') + ' → ' + (${validTo} || ${i18n>openEnded}) }"
                                            info="{= ${isResponsible} ? ${i18n>responsible} : ''}"
                                            infoState="Success"/>
                                </items>
                            </List>
                        </Panel>
                    </VBox>
                </content>
            </Page>
            <Page
                    id="costCentersPage"
                    title="{i18n>costCenters}"
                    showNavButton="true"
                    navButtonPress=".onBackToEmployees">
                <content>
                    <VBox class="sapUiSmallMargin">
                        <IconTabBar
                                id="costCentersTabBar"
                                selectedKey="{view>/selectedTabKey}"
                                select=".onTabSelect"
                                expandable="false"
                                upperCase="false">
                            <items>
                                <IconTabFilter key="clients" text="{i18n>clients}" icon="sap-icon://customer"/>
                                <IconTabFilter key="employees" text="{i18n>employees}" icon="sap-icon://group"/>
                                <IconTabFilter key="costCenters" text="{i18n>costCenters}" icon="sap-icon://collections-management"/>
                                <IconTabFilter
                                        key="locations"
                                        text="{i18n>locations}"
                                        icon="sap-icon://map"
                                        enabled="{= !!${view>/selectedClientId}}"/>
                            </items>
                        </IconTabBar>
                        <Title level="H2" text="{= ${name} ? ${i18n>costCentersOf} + ' ' + ${name} : ${i18n>costCenters}}"/>
                        <Text
                                visible="{= !!${companyId}}"
                                text="{= ${companyId} ? ${i18n>companyId} + ': ' + ${companyId} : ''}"/>
                        <Text text="{i18n>manageCostCentersDesc}"/>
                        <Panel
                                id="costCenterStatisticsPanel"
                                headerText="{i18n>costCenterStatisticsDashboard}"
                                expandable="true"
                                expanded="{view>/costCenterStatisticsExpanded}"
                                class="sapUiSmallMarginTop sapUiSmallMarginBottom"
                                visible="{= !!${view>/selectedClientId}}"
                                busy="{view>/costCenterStatisticsLoading}">
                            <content>
                                <HBox justifyContent="SpaceAround" wrap="Wrap" class="sapUiSmallMargin">
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{costCenterStatistics>/totalCostCenters}"
                                                unit="{i18n>totalCostCenters}"
                                                state="Information"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{costCenterStatistics>/activeCostCenters}"
                                                unit="{i18n>activeCostCenters}"
                                                state="Success"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{costCenterStatistics>/expiredCostCenters}"
                                                unit="{i18n>expiredCostCenters}"
                                                state="Error"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{costCenterStatistics>/upcomingExpiry}"
                                                unit="{i18n>upcomingCostCenterExpiry}"
                                                state="Warning"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{costCenterStatistics>/withAssignedEmployees}"
                                                unit="{i18n>withAssignedEmployees}"
                                                state="Information"/>
                                    </VBox>
                                </HBox>
                            </content>
                        </Panel>
                        <List
                                id="costCentersList"
                                mode="SingleSelectMaster"
                                includeItemInSelection="true"
                                items="{path: 'costCenters'}"
                                growing="true" growingThreshold="20" growingScrollToLoad="true"
                                noDataText="{i18n>noCostCentersFound}"
                                selectionChange=".onCostCentersSelectionChange">
                            <headerToolbar>
                                <Toolbar>
                                    <Title text="{i18n>costCenters}" level="H3"/>
                                    <ToolbarSpacer/>
                                    <Button
                                            type="Emphasized"
                                            text="{i18n>add}"
                                            icon="sap-icon://add"
                                            visible="{auth>/canWrite}"
                                            press=".onAddCostCenter"/>
                                    <Button
                                            text="{i18n>edit}"
                                            icon="sap-icon://edit"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedCostCenterId}}"
                                            press=".onEditCostCenter"/>
                                    <Button
                                            text="{i18n>delete}"
                                            icon="sap-icon://delete"
                                            type="Transparent"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedCostCenterId}}"
                                            press=".onDeleteCostCenter"/>
                                    <Button
                                            text="{i18n>refresh}"
                                            icon="sap-icon://refresh"
                                            press=".onRefreshCostCenters"/>
                                </Toolbar>
                            </headerToolbar>
                            <items>
                                <StandardListItem
                                        title="{= (${code} || '') + ( ${name} ? ' - ' + ${name} : '' ) }"
                                        description="{responsible/firstName} {responsible/lastName}"/>
                            </items>
                        </List>
                    </VBox>
                </content>
            </Page>
            <Page
                    id="locationsPage"
                    title="{i18n>locations}"
                    showNavButton="true"
                    navButtonPress=".onBackToEmployees">
                <content>
                    <VBox class="sapUiSmallMargin">
                        <IconTabBar
                                id="locationsTabBar"
                                selectedKey="{view>/selectedTabKey}"
                                select=".onTabSelect"
                                expandable="false"
                                upperCase="false">
                            <items>
                                <IconTabFilter key="clients" text="{i18n>clients}" icon="sap-icon://customer"/>
                                <IconTabFilter key="employees" text="{i18n>employees}" icon="sap-icon://group"/>
                                <IconTabFilter key="costCenters" text="{i18n>costCenters}" icon="sap-icon://collections-management"/>
                                <IconTabFilter key="locations" text="{i18n>locations}" icon="sap-icon://map"/>
                            </items>
                        </IconTabBar>
                        <Title level="H2" text="{= ${name} ? ${i18n>locationsOf} + ' ' + ${name} : ${i18n>locations}}"/>
                        <Text
                                visible="{= !!${companyId}}"
                                text="{= ${companyId} ? ${i18n>companyId} + ': ' + ${companyId} : ''}"/>
                        <Text text="{i18n>manageLocationsDesc}"/>
                        <Panel
                                id="locationStatisticsPanel"
                                headerText="{i18n>locationStatisticsDashboard}"
                                expandable="true"
                                expanded="{view>/locationStatisticsExpanded}"
                                class="sapUiSmallMarginTop sapUiSmallMarginBottom"
                                visible="{= !!${view>/selectedClientId}}"
                                busy="{view>/locationStatisticsLoading}">
                            <content>
                                <HBox justifyContent="SpaceAround" wrap="Wrap" class="sapUiSmallMargin">
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{locationStatistics>/totalLocations}"
                                                unit="{i18n>totalLocations}"
                                                state="Information"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{locationStatistics>/activeLocations}"
                                                unit="{i18n>activeLocations}"
                                                state="Success"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{locationStatistics>/expiredLocations}"
                                                unit="{i18n>expiredLocations}"
                                                state="Error"/>
                                    </VBox>
                                    <VBox alignItems="Center" class="sapUiSmallMargin">
                                        <ObjectNumber
                                                number="{locationStatistics>/upcomingExpiry}"
                                                unit="{i18n>upcomingLocationExpiry}"
                                                state="Warning"/>
                                    </VBox>
                                </HBox>
                            </content>
                        </Panel>
                        <List
                                id="locationsList"
                                mode="SingleSelectMaster"
                                includeItemInSelection="true"
                                items="{path: 'locations'}"
                                growing="true" growingThreshold="20" growingScrollToLoad="true"
                                noDataText="{i18n>noLocationsFound}"
                                selectionChange=".onLocationsSelectionChange">
                            <headerToolbar>
                                <Toolbar>
                                    <Title text="{i18n>locations}" level="H3"/>
                                    <ToolbarSpacer/>
                                    <Button
                                            type="Emphasized"
                                            text="{i18n>add}"
                                            icon="sap-icon://add"
                                            visible="{auth>/canWrite}"
                                            press=".onAddLocation"/>
                                    <Button
                                            text="{i18n>edit}"
                                            icon="sap-icon://edit"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedLocationId}}"
                                            press=".onEditLocation"/>
                                    <Button
                                            text="{i18n>delete}"
                                            icon="sap-icon://delete"
                                            type="Transparent"
                                            visible="{auth>/canWrite}"
                                            enabled="{= !!${view>/selectedLocationId}}"
                                            press=".onDeleteLocation"/>
                                    <Button
                                            text="{i18n>refresh}"
                                            icon="sap-icon://refresh"
                                            press=".onRefreshLocations"/>
                                </Toolbar>
                            </headerToolbar>
                            <items>
                                <StandardListItem
                                        title="{= (${street} || '') + ', ' + (${city} || '') }"
                                        description="{= (${zipCode} || '') + ' • ' + (${country_code} || '') }"/>
                            </items>
                        </List>
                    </VBox>
                </content>
            </Page>
        </pages>
    </App>

    <Dialog
            id="clientDialog"
            title="{dialog>/title}"
            stretch="{= Device.system.phone }"
            afterClose=".onDialogAfterClose">
        <content>
            <VBox class="sapUiContentPadding">
                <Label text="{i18n>companyId}" required="true" labelFor="companyIdInput"/>
                <Input id="companyIdInput" value="{dialog>/client/companyId}" placeholder="{i18n>placeholderCompanyId}"/>
                <Label text="{i18n>name}" required="true" labelFor="clientNameInput"/>
                <Input id="clientNameInput" value="{dialog>/client/name}" placeholder="{i18n>placeholderClientName}"/>
            </VBox>
        </content>
        <beginButton>
            <Button text="{i18n>save}" type="Emphasized" press=".onSaveClient"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" press=".onCancelClient"/>
        </endButton>
    </Dialog>

    <Dialog
            id="employeeDialog"
            title="{employeeDialog>/title}"
            stretch="{= Device.system.phone }"
            afterClose=".onEmployeeDialogAfterClose">
        <content>
            <VBox class="sapUiContentPadding">
                <Label text="{i18n>employeeId}" labelFor="employeeIdInput"/>
                <Input
                        id="employeeIdInput"
                        value="{employeeDialog>/employee/employeeId}"
                        editable="false"
                        placeholder="{i18n>placeholderEmployeeId}"/>
                <Label text="{i18n>firstName}" required="true" labelFor="employeeFirstName"/>
                <Input id="employeeFirstName" value="{employeeDialog>/employee/firstName}" placeholder="{i18n>placeholderFirstName}"/>
                <Label text="{i18n>lastName}" required="true" labelFor="employeeLastName"/>
                <Input id="employeeLastName" value="{employeeDialog>/employee/lastName}" placeholder="{i18n>placeholderLastName}"/>
                <Label text="{i18n>email}" required="true" labelFor="employeeEmail"/>
                <Input id="employeeEmail" type="Email" value="{employeeDialog>/employee/email}" placeholder="{i18n>placeholderEmail}"/>
                <Label text="{i18n>phoneNumber}" labelFor="employeePhoneNumber"/>
                <Input id="employeePhoneNumber" type="Tel" value="{employeeDialog>/employee/phoneNumber}" placeholder="{i18n>placeholderPhoneNumber}" maxLength="30"/>
                <Label text="{i18n>costCenter}" labelFor="employeeCostCenter"/>
                <Select
                        id="employeeCostCenter"
                        items="{ path: 'costCenters', parameters: { $select: ['ID','code','name','responsible_ID'], $expand: { responsible: { $select: ['firstName','lastName'] } } } }"
                        change=".onEmployeeCostCenterChange"
                        selectedKey="{employeeDialog>/employee/costCenter_ID}">
                    <core:Item key="{ID}" text="{= (${code} || '') + ( ${name} ? ' - ' + ${name} : '' ) }"/>
                </Select>
                <Label text="{i18n>manager}" labelFor="employeeManager"/>
                <Input id="employeeManager" value="{employeeDialog>/employee/managerName}" editable="false" placeholder="{i18n>placeholderManager}"/>
                <Label text="{i18n>location}" required="true" labelFor="employeeLocation"/>
                <Select
                        id="employeeLocation"
                        items="{ path: 'locations', parameters: { $select: ['ID','city','street','country_code'] } }"
                        selectedKey="{employeeDialog>/employee/location_ID}">
                    <core:Item key="{ID}" text="{= (${street} || '') + ', ' + (${city} || '') + ' (' + (${country_code} || '') + ')' }"/>
                </Select>
                <Label text="{i18n>positionLevel}" labelFor="employeePosition"/>
                <Input id="employeePosition" value="{employeeDialog>/employee/positionLevel}" placeholder="{i18n>placeholderPosition}"/>
                <Label text="{i18n>entryDate}" required="true" labelFor="employeeEntryDate"/>
                <DatePicker
                        id="employeeEntryDate"
                        value="{employeeDialog>/employee/entryDate}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderEntryDate}"/>
                <Label text="{i18n>exitDate}" labelFor="employeeExitDate"/>
                <DatePicker
                        id="employeeExitDate"
                        value="{employeeDialog>/employee/exitDate}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderExitDate}"/>
                <Label text="{i18n>status}" required="true" labelFor="employeeStatus"/>
                <Select
                        id="employeeStatus"
                        items="{ path: 'statusOptions>/', templateShareable: false }"
                        selectedKey="{employeeDialog>/employee/status}"
                        forceSelection="true"
                        required="true">
                    <core:Item key="{statusOptions>key}" text="{statusOptions>text}"/>
                </Select>
                <Label text="{i18n>employmentType}" required="true" labelFor="employeeEmploymentType"/>
                <Select
                        id="employeeEmploymentType"
                        items="{ path: 'employmentTypeOptions>/', templateShareable: false }"
                        selectedKey="{employeeDialog>/employee/employmentType}"
                        forceSelection="true"
                        required="true">
                    <core:Item key="{employmentTypeOptions>key}" text="{employmentTypeOptions>text}"/>
                </Select>
                <Label text="{i18n>isManager}" labelFor="employeeIsManager"/>
                <CheckBox
                        id="employeeIsManager"
                        selected="{employeeDialog>/employee/isManager}"/>
            </VBox>
        </content>
        <beginButton>
            <Button text="{i18n>save}" type="Emphasized" press=".onSaveEmployee" enabled="{= !${employeeDialog>/managerLookupPending} }"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" press=".onCancelEmployee"/>
        </endButton>
    </Dialog>

    <Dialog
            id="costCenterDialog"
            title="{costCenterDialog>/title}"
            stretch="{= Device.system.phone }"
            afterClose=".onCostCenterDialogAfterClose">
        <content>
            <VBox class="sapUiContentPadding">
                <Label text="{i18n>code}" required="true" labelFor="costCenterCode"/>
                <Input id="costCenterCode" value="{costCenterDialog>/costCenter/code}" placeholder="{i18n>placeholderCostCenterCode}"/>
                <Label text="{i18n>name}" required="true" labelFor="costCenterName"/>
                <Input id="costCenterName" value="{costCenterDialog>/costCenter/name}" placeholder="{i18n>placeholderCostCenterName}"/>
                <Label text="{i18n>description}" labelFor="costCenterDescription"/>
                <Input id="costCenterDescription" value="{costCenterDialog>/costCenter/description}" placeholder="{i18n>placeholderDescription}"/>
                <Label text="{i18n>validFrom}" required="true" labelFor="costCenterValidFrom"/>
                <DatePicker
                        id="costCenterValidFrom"
                        value="{costCenterDialog>/costCenter/validFrom}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderValidFrom}"/>
                <Label text="{i18n>validTo}" labelFor="costCenterValidTo"/>
                <DatePicker
                        id="costCenterValidTo"
                        value="{costCenterDialog>/costCenter/validTo}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderValidTo}"/>
                <Label text="{i18n>responsible}" required="true" labelFor="costCenterResponsible"/>
                <Select
                        id="costCenterResponsible"
                        items="{path: 'employees'}"
                        selectedKey="{costCenterDialog>/costCenter/responsible_ID}">
                    <core:Item key="{ID}" text="{= (${firstName} || '') + ' ' + (${lastName} || '') }"/>
                </Select>
            </VBox>
        </content>
        <beginButton>
            <Button text="{i18n>save}" type="Emphasized" press=".onSaveCostCenter"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" press=".onCancelCostCenter"/>
        </endButton>
    </Dialog>

    <Dialog
            id="locationDialog"
            title="{locationDialog>/title}"
            stretch="{= Device.system.phone }"
            afterClose=".onLocationDialogAfterClose">
        <content>
            <VBox class="sapUiContentPadding">
                <Label text="{i18n>city}" required="true" labelFor="locationCity"/>
                <Input id="locationCity" value="{locationDialog>/location/city}" placeholder="{i18n>placeholderCity}"/>
                <Label text="{i18n>street}" required="true" labelFor="locationStreet"/>
                <Input id="locationStreet" value="{locationDialog>/location/street}" placeholder="{i18n>placeholderStreet}"/>
                <Label text="{i18n>addressSupplement}" labelFor="locationAddressSupplement"/>
                <Input id="locationAddressSupplement" value="{locationDialog>/location/addressSupplement}" placeholder="{i18n>placeholderAddressSupplement}"/>
                <Label text="{i18n>zipCode}" required="true" labelFor="locationZipCode"/>
                <Input id="locationZipCode" value="{locationDialog>/location/zipCode}" placeholder="{i18n>placeholderZipCode}"/>
                <Label text="{i18n>country}" required="true" labelFor="locationCountrySelect"/>
                <Select
                        id="locationCountrySelect"
                        items="{ path: 'countryOptions>/', templateShareable: false }"
                        selectedKey="{locationDialog>/location/country_code}"
                        forceSelection="false"
                        required="true">
                    <core:Item
                            key="{countryOptions>key}"
                            text="{= ${countryOptions>text} + ' (' + ${countryOptions>key} + ')' }"/>
                </Select>
                <Label text="{i18n>validFrom}" required="true" labelFor="locationValidFrom"/>
                <DatePicker
                        id="locationValidFrom"
                        value="{locationDialog>/location/validFrom}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderValidFrom}"/>
                <Label text="{i18n>validTo}" labelFor="locationValidTo"/>
                <DatePicker
                        id="locationValidTo"
                        value="{locationDialog>/location/validTo}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderValidToOptional}"/>
            </VBox>
        </content>
        <beginButton>
            <Button text="{i18n>save}" type="Emphasized" press=".onSaveLocation"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" press=".onCancelLocation"/>
        </endButton>
    </Dialog>

    <Dialog
            id="assignmentDialog"
            title="{assignmentDialog>/title}"
            stretch="{= Device.system.phone }"
            afterClose=".onAssignmentDialogAfterClose">
        <content>
            <VBox class="sapUiContentPadding">
                <Label text="{i18n>costCenter}" required="true" labelFor="assignmentCostCenter"/>
                <Select
                        id="assignmentCostCenter"
                        items="{ path: 'client/costCenters', parameters: { $select: ['ID','code','name'] } }"
                        selectedKey="{assignmentDialog>/assignment/costCenter_ID}">
                    <core:Item key="{ID}" text="{= (${code} || '') + ( ${name} ? ' - ' + ${name} : '' ) }"/>
                </Select>
                <Label text="{i18n>validFrom}" required="true" labelFor="assignmentValidFrom"/>
                <DatePicker
                        id="assignmentValidFrom"
                        value="{assignmentDialog>/assignment/validFrom}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderValidFrom}"/>
                <Label text="{i18n>validTo}" labelFor="assignmentValidTo"/>
                <DatePicker
                        id="assignmentValidTo"
                        value="{assignmentDialog>/assignment/validTo}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderValidTo}"/>
                <CheckBox
                        id="assignmentResponsible"
                        text="{i18n>responsibleFlag}"
                        selected="{assignmentDialog>/assignment/isResponsible}"/>
            </VBox>
        </content>
        <beginButton>
            <Button text="{i18n>save}" type="Emphasized" press=".onSaveAssignment"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" press=".onCancelAssignment"/>
        </endButton>
    </Dialog>

    <Dialog
            id="anonymizeDialog"
            title="{i18n>anonymizeFormerEmployees}"
            stretch="{= Device.system.phone }">
        <content>
            <VBox class="sapUiContentPadding">
                <Text text="{i18n>anonymizeDescription}"/>
                <Label text="{i18n>anonymizeBefore}" required="true" labelFor="anonymizeBeforeDate"/>
                <DatePicker
                        id="anonymizeBeforeDate"
                        value="{view>/anonymizeBefore}"
                        valueFormat="yyyy-MM-dd"
                        displayFormat="long"
                        placeholder="{i18n>placeholderAnonymizeBefore}"/>
            </VBox>
        </content>
        <beginButton>
            <Button text="{i18n>confirm}" type="Emphasized" press=".onConfirmAnonymize"/>
        </beginButton>
        <endButton>
            <Button text="{i18n>cancel}" press=".onCancelAnonymize"/>
        </endButton>
    </Dialog>
</mvc:View>
